<!DOCTYPE html>
<html>
<head>
    <title>CORS Test</title>
</head>
<body>
    <h2>üïµÔ∏è ‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡∏Å‡∏≤‡∏£‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠ CORS</h2>
    <button onclick="testAPI()">‡∏Å‡∏î‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡∏¢‡∏¥‡∏á API</button>
    <p id="result" style="margin-top: 20px; font-weight: bold;"></p>

    <script>
        async function testAPI() {
            const status = document.getElementById("result");
            status.innerHTML = "‚è≥ ‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠...";
            status.style.color = "blue";

            try {
                // ‡∏à‡∏≥‡∏•‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏¢‡∏¥‡∏á API ‡πÄ‡∏´‡∏°‡∏∑‡∏≠‡∏ô Frontend
                const response = await fetch("http://127.0.0.1:8000/chat", {
                    method: "POST",
                    headers: {
                        "Content-Type": "application/json"
                    },
                    body: JSON.stringify({
                        question: "‡∏ó‡∏î‡∏™‡∏≠‡∏ö CORS",
                        history: []
                    })
                });

                if (response.ok) {
                    const data = await response.json();
                    status.innerHTML = "‚úÖ ‡∏ú‡πà‡∏≤‡∏ô! (CORS ‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á)";
                    status.style.color = "green";
                    console.log("Response:", data);
                } else {
                    status.innerHTML = "‚ùå ‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠‡πÑ‡∏î‡πâ ‡πÅ‡∏ï‡πà‡∏°‡∏µ Error ‡∏≠‡∏∑‡πà‡∏ô: " + response.status;
                    status.style.color = "orange";
                }
            } catch (error) {
                // ‡∏ñ‡πâ‡∏≤‡∏ï‡∏¥‡∏î CORS ‡∏à‡∏∞‡∏ï‡∏Å‡∏°‡∏≤‡∏ó‡∏µ‡πà‡∏ô‡∏µ‡πà
                status.innerHTML = "‚ùå ‡πÑ‡∏°‡πà‡∏ú‡πà‡∏≤‡∏ô! (‡πÇ‡∏î‡∏ô Blocked ‡∏´‡∏£‡∏∑‡∏≠ Server ‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡πÄ‡∏õ‡∏¥‡∏î)";
                status.style.color = "red";
                console.error("Error:", error);
            }
        }
    </script>
</body>
</html>